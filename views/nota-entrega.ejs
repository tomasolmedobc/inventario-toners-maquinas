<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <title>Nota de Entrega</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: url('/resources/image/informe2.png') no-repeat center center;
      background-size: 90%;
      background-attachment: fixed;
    }

    .fondo-transparente {
      background-color: rgba(255, 255, 255, 0.85);
      /* blanco semitransparente */
      padding: 2rem;
      border-radius: 8px;
    }

    @media print {
      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: url('/resources/image/informe2.png') no-repeat center center;
        background-size: 70%;
        opacity: 0.08;
        z-index: -1;
        pointer-events: none;
      }

      .no-print {
        display: none !important;
      }

      .fondo-transparente {
        background: transparent !important;
        box-shadow: none !important;
      }
    }
  </style>
</head>

<body class="p-4">
  <div class="container fondo-transparente">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h2 class="fw-bold">Nota de Entrega</h2>
      <button onclick="window.print()" class="btn btn-primary no-print">üñ®Ô∏è Imprimir</button>
    </div>

    <!-- Datos generales -->
    <p><strong>Fecha:</strong>
      <%= new Date(movimiento.fecha).toLocaleDateString() %>
    </p>
    <p><strong>√Årea de destino:</strong> <%= areaNombre %></p>
        <p><strong>Entregado por:</strong>
          <%= movimiento.usuario?.nombre || '---' %>
        </p>
        <p><strong>Observaci√≥n:</strong>
          <%= movimiento.observacion || 'Sin observaciones' %>
        </p>

        <!-- Tabla de productos -->
        <hr>
        <h5 class="mt-4 mb-2">Productos Entregados:</h5>
        <table class="table table-bordered table-sm">
          <thead class="table-light">
            <tr>
              <th>#</th>
              <th>Tipo</th>
              <th>Marca</th>
              <th>Modelo</th>
              <th>Cantidad</th>
            </tr>
          </thead>
          <tbody>
            <% movimientos.forEach((mov, i)=> { %>
              <tr>
                <td>
                  <%= i + 1 %>
                </td>
                <td>
                  <%= mov.producto.tipo %>
                </td>
                <td>
                  <%= mov.producto.marca %>
                </td>
                <td>
                  <%= mov.producto.modelo %>
                </td>
                <td>
                  <%= mov.cantidad %>
                </td>
              </tr>
              <% }) %>
          </tbody>
        </table>

        <!-- Firmas -->
        <div class="row mt-5">
          <div class="col-6">
            <p><strong>Firma Responsable:</strong></p>
            <p>___________________________</p>
          </div>
          <div class="col-6">
            <p><strong>Firma Receptor:</strong></p>
            <p>___________________________</p>
          </div>
        </div>
  </div>
</body>

</html>